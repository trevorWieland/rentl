[project]
schema_version = { major = 0, minor = 1, patch = 0 }
project_name = "local-validate"

[project.paths]
workspace_dir = "."
input_path = "sample_scenes.jsonl"
output_dir = "out"
logs_dir = "logs"

[logging]
[[logging.sinks]]
type = "file"

[[logging.sinks]]
type = "console"

[agents]
prompts_dir = "packages/rentl-agents/prompts"
agents_dir = "packages/rentl-agents/agents"

[project.formats]
input_format = "jsonl"
output_format = "jsonl"

[project.languages]
source_language = "ja"
target_languages = ["en"]

[endpoint]
provider_name = "local"
base_url = "http://172.20.192.1:1234/v1"
api_key_env = "RENTL_LOCAL_API_KEY"
timeout_s = 180

[pipeline.default_model]
model_id = "google/gemma-3-27b"
reasoning_effort = "medium"

[[pipeline.phases]]
phase = "ingest"

[[pipeline.phases]]
phase = "context"
agents = ["scene_summarizer"]

[[pipeline.phases]]
phase = "pretranslation"
agents = ["idiom_labeler"]

[[pipeline.phases]]
phase = "translate"
agents = ["direct_translator"]

[[pipeline.phases]]
phase = "qa"
agents = ["style_guide_critic"]

[[pipeline.phases]]
phase = "edit"
agents = ["basic_editor"]

[[pipeline.phases]]
phase = "export"

[concurrency]
max_parallel_requests = 1
max_parallel_scenes = 1

[retry]
max_retries = 1
backoff_s = 1.0
max_backoff_s = 2.0

[cache]
enabled = false
